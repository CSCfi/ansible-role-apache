---
# defaults file for apache
apache_https_port: 443

# latest / installed (if enought that apache is already installed but not the latest one)
apache_state: latest 

apache_sslciphersuite: "DHE-RSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-SHA256:DHE-RSA-AES128-SHA256:ECDHE-RSA-AES256-SHA384:ECDHE-RSA-AES128-SHA256:!aNULL:!eNULL:!LOW:!3DES:!MD5:!EXP:!PSK:!DSS:!RC4:!SEED:!ECDSA:!ADH:!IDEA:!3DES"
apache_sslprotocol: "ALL -SSLv2 -SSLv3 -TLSv1 -TLSv1.1"

apache_ssl_key: "{{ vault_ssl_key | default('not_set_yet') }}"
apache_ssl_crt: "{{ vault_ssl_crt | default('not_set_yet') }}"
apache_ssl_cabundle: "{{ vault_ssl_cabundle | default('not_set_yet') }}"

apache_fqdn: "{{ ansible_fqdn }}"

apache_ssl_hardening_items2:
    - file: "{{ apache_conf }}"
      option: "TraceEnable"
      value: "off"
    - file: "{{ apache_conf }}"
      option: "ServerTokens"
      value: "Prod"
    - file: "{{ apache_conf }}"
      option: "ServerSignature"
      value: "off"
    - file: "{{ apache_conf }}"
      option: "TraceEnable"
      value: "off"
    - file: "{{ apache_conf }}"
      option: "Header always set Strict-Transport-Security"
      value: "'max-age=63072000; includeSubDomains; preload'"
    - file: "{{ apache_conf }}"
      option: "Header always set X-Frame-Options"
      value: "DENY"
    - file: "{{ apache_conf }}"
      option: "Header always set X-Content-Type-Options"
      value: "nosniff"
    - file: "{{ apache_conf }}"
      option: "SSLCompression"
      value: "off"
    - file: "{{ apache_conf }}"
      option: "SSLUseStapling"
      value: "on"
    - file: "{{ apache_conf }}"
      option: "SSLStaplingCache"
      value: "'shmcb:logs/stapling-cache(150000)'"
    - file: "{{ apache_conf }}"
      option: "SSLSessionTickets"
      value: "off"
